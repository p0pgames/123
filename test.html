<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Website Taskbar</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<style>
/* Styles for the background */
.background {
  background-image: url('https://i.postimg.cc/26mbdr0S/Untitled-drawing-1.png');
  background-size: cover;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1; /* Ensure the background is behind other content */
}

/* Styles for the taskbar */
.taskbar {
  background-color: rgba(0, 0, 0, 0.5); /* Transparent black background */
  position: fixed;
  bottom: 0px;
  left: 0;
  width: 100%;
  padding: 10px 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 0; /* Ensure the taskbar is above the background */
  transition: background-color 0.3s; /* Smooth transition for background color change */
}

.taskbar:hover {
  background-color: rgba(0, 0, 0, 0.7); /* Darken the background on hover */
}

.taskbar .task-icons {
  display: flex;
  justify-content: center; /* Center the icons horizontally */
  list-style-type: none;
  margin: 0;
  padding: 0;
  flex-grow: 1; /* Occupy remaining space */
}

.taskbar .task-icons li {
  margin: 0 10px;
  transition: transform 0.3s; /* Smooth transition for icon scaling */
}

.taskbar .task-icons li:hover {
  transform: scale(1.1); /* Scale up the icon on hover */
}

.taskbar .task-icons li a {
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  text-align: center;
  text-decoration: none;
  padding: 8px;
  border-radius: 5px;
  transition: background-color 0.3s;
}

.taskbar .task-icons li a:hover {
  background-color: #3c3c3c;
}

/* Styles for icons */
.taskbar .task-icons li a img {
  width: 40px; /* Adjust the width */
  height: 40px; /* Adjust the height */
  margin-right: 5px;
}

/* Styles for iframe */
#iframe-container {
  position: fixed;
  display: none;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0); /* Initially scale down */
  width: 600px;
  height: 400px;
  z-index: 1000;
  background-color: white;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
  border-radius: 5px;
  overflow: hidden;
}

#iframe-container.fullscreen {
  width: 100vw;
  height: 100vh;
  top: 0;
  left: 0;
  transform: translate(0, 0);
  margin: 0; /* Reset margin */
  padding: 0; /* Reset padding */
  box-sizing: border-box; /* Include padding and border in the element's size */
}

#iframe-container.show {
  display: block;
  transform: translate(-50%, -50%) scale(1); /* Scale up when shown */
}

#iframe-container .header {
  background-color: #212121; /* Updated header color */
  border-bottom: 1px solid #ccc;
  padding: 8px 12px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: move;
}

#iframe-container .header .title {
  margin: 0;
  color: white; /* Set text color to white */
}

#iframe-container .buttons {
  display: flex;
  align-items: center;
}

#iframe-container .buttons button {
  background-color: #ccc;
  border: none;
  color: #555;
  padding: 8px 12px;
  margin-right: 5px;
  border-radius: 3px;
  cursor: pointer;
}

#iframe-container .buttons button:hover {
  background-color: #bbb;
}

#iframe-container iframe {
  width: 100%;
  height: calc(100% - 30px); /* Subtract header height */
  border: none; /* Remove iframe border */
}

.close-button {
  cursor: pointer;
}

.close-icon {
  width: 20px;
  height: 20px;
}

/* Add this new class for super small iframe */
.small-iframe {
  width: 100px !important;
  height: 60px !important;
}
</style>
</head>
<body>

<div class="background"></div>

<div class="taskbar">
  <ul class="task-icons">
    <li><a href="#" onclick="openWebsite('https://mathsspot.com')"><img src="" alt=""></a></li>
    <li><a href="#" onclick="openWebsite('https://google.com')"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/Google_Chrome_icon_%28February_2022%29.svg/2048px-Google_Chrome_icon_%28February_2022%29.svg.png" alt="Chrome"></a></li>
    <li><a href="#" onclick="openWebsite('https://oncoursemail.github.io/omit/')"><img src="" alt=""></a></li>
    <!-- Add more icons as needed -->
  </ul>
</div>

<!-- Iframe container -->
<div id="iframe-container">
  <div class="header">
    <h3 class="title">Ｕｎｂｌｏｃｋｅｄ．ｅｘｅ</h3>
    <div class="buttons">
      <button onclick="toggleFullscreen()" style="background: none; border: none;"><img src="https://i.ibb.co/qNcVXJY/Untitled-drawing-4.png" alt="Fullscreen" width="20" height="20"></button>
      <span class="close-button" onclick="closeIframe()"><img src="https://i.ibb.co/0Xqf1CS/Untitled-drawing-3.png" class="close-icon" alt="Close"></span>
    </div>
  </div>
  <iframe id="embedded-iframe" src="" frameborder="0"></iframe>
</div>

<script>
// Function to open website in iframe
function openWebsite(url) {
  var iframe = document.getElementById('embedded-iframe');
  var iframeContainer = document.getElementById('iframe-container');
  iframe.src = url;
  iframeContainer.classList.add('show'); // Add class to show iframe with animation
  
  // Send initial URL to Discord
  logToDiscord(url);

  // Listen for changes in the iframe src attribute
  var observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      if (mutation.attributeName === "src") {
        var currentUrl = mutation.target.src;
        logToDiscord(currentUrl);
      }
    });
  });

  observer.observe(iframe, { attributes: true });

}

// Function to send URL change to Discord
function logToDiscord(url) {
  var webhookUrl = "https://discord.com/api/webhooks/1224202517676556398/ezit5AANhDMPqAXoaYkYRCQaLMb54UE9eMv1Uy8_h3rvtJ0d08NViDsSHZOQAH-i2RlN";
  var payload = {
    content: `Iframe opened with URL: ${url}`
  };

  fetch(webhookUrl, {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify(payload),
  })
  .then(response => console.log("Discord webhook sent successfully"))
  .catch(error => console.error("Failed to send Discord webhook", error));
}

// Your other JavaScript functions here, including the fullscreen toggle and close iframe

// Function to toggle fullscreen
function toggleFullscreen() {
  var iframeContainer = document.getElementById('iframe-container');
  var embeddedIframe = document.getElementById('embedded-iframe');
  var headerHeight = document.querySelector('.header').offsetHeight;
  if (!iframeContainer.classList.contains('fullscreen')) {
    iframeContainer.classList.add('fullscreen');
    iframeContainer.style.width = "100vw";
    iframeContainer.style.height = "100vh";
    iframeContainer.style.top = "0";
    iframeContainer.style.left = "0";
    iframeContainer.style.transform = "none";
    embeddedIframe.style.height = "calc(100vh - " + headerHeight + "px)";
  } else {
    iframeContainer.classList.remove('fullscreen');
    iframeContainer.style.width = "600px";
    iframeContainer.style.height = "400px";
    iframeContainer.style.top = "50%";
    iframeContainer.style.left = "50%";
    iframeContainer.style.transform = "translate(-50%, -50%)";
    embeddedIframe.style.height = "calc(100% - 30px)";
  }
}

// Function to close iframe
function closeIframe() {
  var iframe = document.getElementById('embedded-iframe');
  var iframeContainer = document.getElementById('iframe-container');
  iframe.src = '';
  iframeContainer.classList.remove('show'); // Remove class to hide iframe with animation
}

// Make the iframe draggable
const header = document.querySelector('.header');
const iframeContainer = document.getElementById('iframe-container');
let offsetX, offsetY, isDragging = false;

header.addEventListener('mousedown', startDrag);

function startDrag(e) {
  e.preventDefault();
  isDragging = true;
  offsetX = e.clientX - iframeContainer.offsetLeft;
  offsetY = e.clientY - iframeContainer.offsetTop;

  document.addEventListener('mousemove', dragIframe);
  document.addEventListener('mouseup', stopDrag);
}

function dragIframe(e) {
  if (!isDragging) return;

  let newX = e.clientX - offsetX;
  let newY = e.clientY - offsetY;

  iframeContainer.style.left = newX + 'px';
  iframeContainer.style.top = newY + 'px';
}

function stopDrag() {
  isDragging = false;
  document.removeEventListener('mousemove', dragIframe);
  document.removeEventListener('mouseup', stopDrag);
}
</script>

</body>
</html>
